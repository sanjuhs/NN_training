<!DOCTYPE html>
<html lang="en">

<head>
    <title>Basic Three.js Scene - Modern ES6 Modules</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }

        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            max-width: 600px;
        }

        #info h1 {
            margin-top: 0;
        }

        #info p {
            margin: 10px 0;
            padding: 0;
        }

        a {
            color: #2fa1d6;
        }
    </style>
</head>

<body>
    <div id="info">
        <h1>Basic Three.js Scene</h1>
        <p>Modern ES6 module setup with rotating cube, lighting, and shadows</p>
        <p>Uses <a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> with import maps</p>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';

        let container, camera, scene, renderer, cube, clock;

        init();
        animate();

        function init() {
            // Create container
            container = document.createElement('div');
            document.body.appendChild(container);

            // Camera setup
            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.25, 100);
            camera.position.set(-5, 3, 10);
            camera.lookAt(0, 2, 0);

            // Scene setup
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xe0e0e0);
            scene.fog = new THREE.Fog(0xe0e0e0, 20, 100);

            // Clock for animations
            clock = new THREE.Clock();

            // Lighting setup
            const hemiLight = new THREE.HemisphereLight(0xffffff, 0x8d8d8d, 3);
            hemiLight.position.set(0, 20, 0);
            scene.add(hemiLight);

            const dirLight = new THREE.DirectionalLight(0xffffff, 3);
            dirLight.position.set(0, 20, 10);
            dirLight.castShadow = true;
            dirLight.shadow.mapSize.width = 2048;
            dirLight.shadow.mapSize.height = 2048;
            scene.add(dirLight);

            // Ground
            const groundMesh = new THREE.Mesh(
                new THREE.PlaneGeometry(2000, 2000),
                new THREE.MeshPhongMaterial({ color: 0xcbcbcb, depthWrite: false })
            );
            groundMesh.rotation.x = -Math.PI / 2;
            scene.add(groundMesh);

            // Grid
            const grid = new THREE.GridHelper(200, 40, 0x000000, 0x000000);
            grid.material.opacity = 0.2;
            grid.material.transparent = true;
            scene.add(grid);

            // Create rotating cube
            const geometry = new THREE.BoxGeometry(2, 2, 2);
            const material = new THREE.MeshPhongMaterial({
                color: 0x00ff00,
                shininess: 100
            });
            cube = new THREE.Mesh(geometry, material);
            cube.position.y = 2;
            cube.castShadow = true;
            scene.add(cube);

            // Renderer setup
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            container.appendChild(renderer.domElement);

            // Window resize handler
            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            const delta = clock.getDelta();

            // Rotate the cube
            if (cube) {
                cube.rotation.x += delta;
                cube.rotation.y += delta * 0.7;
            }

            renderer.render(scene, camera);
        }
    </script>
</body>

</html>